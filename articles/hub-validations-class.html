<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Structure of hub_validations class objects • hubValidations</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Structure of hub_validations class objects">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">
    <a href="https://hubdocs.readthedocs.io/en/latest/" class="external-link"><img src="https://raw.githubusercontent.com/hubverse-org/hubStyle/main/inst/hubverse.png" id="logo" height="30" alt="hubverse"></a>
    <a class="navbar-brand me-2" href="../index.html">hubValidations</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.3.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"></ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/hub-validations-class.html">Structure of hub_validations class objects</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Validation for hub admins through CI</h6></li>
    <li><a class="dropdown-item" href="../articles/validate-pr.html">Validating Pull Requests on GitHub</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Validation for submitting teams</h6></li>
    <li><a class="dropdown-item" href="../articles/validate-submission.html">Validating submissions locally</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../articles/custom-functions.html">Including custom validation functions</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/hubverse-org/hubValidations/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Structure of hub_validations class objects</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/hubverse-org/hubValidations/blob/main/vignettes/articles/hub-validations-class.Rmd" class="external-link"><code>vignettes/articles/hub-validations-class.Rmd</code></a></small>
      <div class="d-none name"><code>hub-validations-class.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/hubverse-org/hubValidations" class="external-link">hubValidations</a></span><span class="op">)</span></span></code></pre></div>
<p>The high level <code>validate_*()</code> family of functions all
return a <code>&lt;hub_validations&gt;</code> S3 class object.</p>
<div class="section level2">
<h2 id="structure-of-hub_validations-object">Structure of <code>&lt;hub_validations&gt;</code> object<a class="anchor" aria-label="anchor" href="#structure-of-hub_validations-object"></a>
</h2>
<p>A <code>hub_validations</code> object is effectively a list and
represents the collected output of the series of checks performed by a
higher level <code>validate_*()</code> function.</p>
<p>Each named element of the list contains the result of an individual
check and inherits from subclass <code>&lt;hub_check&gt;</code>. The
name of each element is the name of the check.</p>
<p>Let’s examine an example output of a model output file validation
using <code><a href="../reference/validate_submission.html">validate_submission()</a></code>.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">hub_path</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"testhubs/simple"</span>, package <span class="op">=</span> <span class="st">"hubValidations"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">v</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/validate_submission.html">validate_submission</a></span><span class="op">(</span><span class="va">hub_path</span>,</span>
<span>  file_path <span class="op">=</span> <span class="st">"team1-goodmodel/2022-10-08-team1-goodmodel.csv"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">v</span>, max.level <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span><span class="co">#&gt; List of 20</span></span>
<span><span class="co">#&gt;  $ valid_config      :List of 4</span></span>
<span><span class="co">#&gt;   ..- attr(*, "class")= chr [1:5] "check_success" "hub_check" "rlang_message" "message" ...</span></span>
<span><span class="co">#&gt;  $ file_exists       :List of 4</span></span>
<span><span class="co">#&gt;   ..- attr(*, "class")= chr [1:5] "check_success" "hub_check" "rlang_message" "message" ...</span></span>
<span><span class="co">#&gt;  $ file_name         :List of 4</span></span>
<span><span class="co">#&gt;   ..- attr(*, "class")= chr [1:5] "check_success" "hub_check" "rlang_message" "message" ...</span></span>
<span><span class="co">#&gt;  $ file_location     :List of 4</span></span>
<span><span class="co">#&gt;   ..- attr(*, "class")= chr [1:5] "check_success" "hub_check" "rlang_message" "message" ...</span></span>
<span><span class="co">#&gt;  $ round_id_valid    :List of 4</span></span>
<span><span class="co">#&gt;   ..- attr(*, "class")= chr [1:5] "check_success" "hub_check" "rlang_message" "message" ...</span></span>
<span><span class="co">#&gt;  $ file_format       :List of 4</span></span>
<span><span class="co">#&gt;   ..- attr(*, "class")= chr [1:5] "check_success" "hub_check" "rlang_message" "message" ...</span></span>
<span><span class="co">#&gt;  $ metadata_exists   :List of 4</span></span>
<span><span class="co">#&gt;   ..- attr(*, "class")= chr [1:5] "check_success" "hub_check" "rlang_message" "message" ...</span></span>
<span><span class="co">#&gt;  $ file_read         :List of 4</span></span>
<span><span class="co">#&gt;   ..- attr(*, "class")= chr [1:5] "check_success" "hub_check" "rlang_message" "message" ...</span></span>
<span><span class="co">#&gt;  $ valid_round_id_col:List of 4</span></span>
<span><span class="co">#&gt;   ..- attr(*, "class")= chr [1:5] "check_success" "hub_check" "rlang_message" "message" ...</span></span>
<span><span class="co">#&gt;  $ unique_round_id   :List of 4</span></span>
<span><span class="co">#&gt;   ..- attr(*, "class")= chr [1:5] "check_success" "hub_check" "rlang_message" "message" ...</span></span>
<span><span class="co">#&gt;  $ match_round_id    :List of 4</span></span>
<span><span class="co">#&gt;   ..- attr(*, "class")= chr [1:5] "check_success" "hub_check" "rlang_message" "message" ...</span></span>
<span><span class="co">#&gt;  $ colnames          :List of 4</span></span>
<span><span class="co">#&gt;   ..- attr(*, "class")= chr [1:5] "check_success" "hub_check" "rlang_message" "message" ...</span></span>
<span><span class="co">#&gt;  $ col_types         :List of 4</span></span>
<span><span class="co">#&gt;   ..- attr(*, "class")= chr [1:5] "check_success" "hub_check" "rlang_message" "message" ...</span></span>
<span><span class="co">#&gt;  $ valid_vals        :List of 5</span></span>
<span><span class="co">#&gt;   ..- attr(*, "class")= chr [1:5] "check_success" "hub_check" "rlang_message" "message" ...</span></span>
<span><span class="co">#&gt;  $ rows_unique       :List of 4</span></span>
<span><span class="co">#&gt;   ..- attr(*, "class")= chr [1:5] "check_success" "hub_check" "rlang_message" "message" ...</span></span>
<span><span class="co">#&gt;  $ req_vals          :List of 5</span></span>
<span><span class="co">#&gt;   ..- attr(*, "class")= chr [1:5] "check_success" "hub_check" "rlang_message" "message" ...</span></span>
<span><span class="co">#&gt;  $ value_col_valid   :List of 4</span></span>
<span><span class="co">#&gt;   ..- attr(*, "class")= chr [1:5] "check_success" "hub_check" "rlang_message" "message" ...</span></span>
<span><span class="co">#&gt;  $ value_col_non_desc:List of 5</span></span>
<span><span class="co">#&gt;   ..- attr(*, "class")= chr [1:5] "check_success" "hub_check" "rlang_message" "message" ...</span></span>
<span><span class="co">#&gt;  $ value_col_sum1    :List of 4</span></span>
<span><span class="co">#&gt;   ..- attr(*, "class")= chr [1:5] "check_info" "hub_check" "rlang_message" "message" ...</span></span>
<span><span class="co">#&gt;  $ submission_time   :List of 4</span></span>
<span><span class="co">#&gt;   ..- attr(*, "class")= chr [1:5] "check_failure" "hub_check" "rlang_warning" "warning" ...</span></span>
<span><span class="co">#&gt;  - attr(*, "class")= chr [1:2] "hub_validations" "list"</span></span></code></pre></div>
<p>The super class returned in each element depends on the status of the
check:</p>
<ul>
<li><p>If a check succeeds, a <code>&lt;message/check_success&gt;</code>
condition class object is returned.</p></li>
<li><p>If a check is skipped, a <code>&lt;message/check_info&gt;</code>
condition class object is returned.</p></li>
<li><p>Checks vary with respect to whether they return an
<code>&lt;error/check_error&gt;</code> or
<code>&lt;warning/check_failure&gt;</code> condition class object if the
check fails. Ultimately, both will cause overall validation to fail and
the two classes are used primarily to communicate the severity of a
failing check.</p></li>
</ul>
</div>
<div class="section level2">
<h2 id="hub_validations-print-method">
<code>hub_validations</code> print method<a class="anchor" aria-label="anchor" href="#hub_validations-print-method"></a>
</h2>
<p><code>hub_validations</code> objects have their own print method
which displays the result, the file name and message of each check:</p>
<ul>
<li>
<code>✔</code> indicates a check was successful (a
<code>&lt;message/check_success&gt;</code> condition class object was
returned)</li>
<li>
<code>✖</code> indicates a high severity check failed (a
<code>&lt;error/check_error&gt;</code> condition class object was
returned)</li>
<li>
<code>!</code> indicates a lower severity check failed (a
<code>&lt;warning/check_failure&gt;</code> condition class object was
returned)</li>
<li>
<code>ℹ</code> indicates a check was skipped (a
<code>&lt;message/check_info&gt;</code> condition class object was
returned)</li>
</ul>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">v</span></span>
<span><span class="co">#&gt; ::notice ::✔ simple: All hub config files are valid.%0A✔ 2022-10-08-team1-goodmodel.csv: File exists at path%0A  <span style="color: #0000BB;">model-output/team1-goodmodel/2022-10-08-team1-goodmodel.csv</span>.%0A✔ 2022-10-08-team1-goodmodel.csv: File name <span style="color: #0000BB;">"2022-10-08-team1-goodmodel.csv"</span> is%0A  valid.%0A✔ 2022-10-08-team1-goodmodel.csv: File directory name matches `model_id`%0A  metadata in file name.%0A✔ 2022-10-08-team1-goodmodel.csv: `round_id` is valid.%0A✔ 2022-10-08-team1-goodmodel.csv: File is accepted hub format.%0A✔ 2022-10-08-team1-goodmodel.csv: Metadata file exists at path%0A  <span style="color: #0000BB;">model-metadata/team1-goodmodel.yaml</span>.%0A✔ 2022-10-08-team1-goodmodel.csv: File could be read successfully.%0A✔ 2022-10-08-team1-goodmodel.csv: `round_id_col` name is valid.%0A✔ 2022-10-08-team1-goodmodel.csv: `round_id` column <span style="color: #0000BB;">"origin_date"</span> contains a%0A  single, unique round ID value.%0A✔ 2022-10-08-team1-goodmodel.csv: All `round_id_col` <span style="color: #0000BB;">"origin_date"</span> values match%0A  submission `round_id` from file name.%0A✔ 2022-10-08-team1-goodmodel.csv: Column names are consistent with expected%0A  round task IDs and std column names.%0A✔ 2022-10-08-team1-goodmodel.csv: Column data types match hub schema.%0A✔ 2022-10-08-team1-goodmodel.csv: `tbl` contains valid values/value%0A  combinations.%0A✔ 2022-10-08-team1-goodmodel.csv: All combinations of task ID%0A  column/`output_type`/`output_type_id` values are unique.%0A✔ 2022-10-08-team1-goodmodel.csv: Required task ID/output type/output type ID%0A  combinations all present.%0A✔ 2022-10-08-team1-goodmodel.csv: Values in column `value` all valid with%0A  respect to modeling task config.%0A✔ 2022-10-08-team1-goodmodel.csv: Values in `value` column are non-decreasing%0A  as output_type_ids increase for all unique task ID value/output type%0A  combinations of quantile or cdf output types.%0Aℹ 2022-10-08-team1-goodmodel.csv: No pmf output types to check for sum of 1.%0A  Check skipped.%0A! 2022-10-08-team1-goodmodel.csv: Submission time must be within accepted%0A  submission window for round.  Current time <span style="color: #0000BB;">"2024-07-25 13:42:37 UTC"</span> is%0A  outside window <span style="color: #0000BB;">2022-10-02 EDT--2022-10-09 23:59:59 EDT</span>.</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="structure-of-a-hub_check-object">Structure of a <code>&lt;hub_check&gt;</code> object<a class="anchor" aria-label="anchor" href="#structure-of-a-hub_check-object"></a>
</h2>
<p>Let’s look more closely at the structure of the first few elements of
the <code>hub_validations</code> object retuned by
<code><a href="../reference/validate_submission.html">validate_submission()</a></code></p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">v</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/validate_submission.html">validate_submission</a></span><span class="op">(</span><span class="va">hub_path</span>,</span>
<span>  file_path <span class="op">=</span> <span class="st">"team1-goodmodel/2022-10-08-team1-goodmodel.csv"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="fu">utils</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">v</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; List of 6</span></span>
<span><span class="co">#&gt;  $ valid_config  :List of 4</span></span>
<span><span class="co">#&gt;   ..$ message       : chr "All hub config files are valid. \n "</span></span>
<span><span class="co">#&gt;   ..$ where         : chr "simple"</span></span>
<span><span class="co">#&gt;   ..$ call          : chr "check_config_hub_valid"</span></span>
<span><span class="co">#&gt;   ..$ use_cli_format: logi TRUE</span></span>
<span><span class="co">#&gt;   ..- attr(*, "class")= chr [1:5] "check_success" "hub_check" "rlang_message" "message" ...</span></span>
<span><span class="co">#&gt;  $ file_exists   :List of 4</span></span>
<span><span class="co">#&gt;   ..$ message       : chr "File exists at path \033[34mmodel-output/team1-goodmodel/2022-10-08-team1-goodmodel.csv\033[39m. \n "</span></span>
<span><span class="co">#&gt;   ..$ where         : chr "team1-goodmodel/2022-10-08-team1-goodmodel.csv"</span></span>
<span><span class="co">#&gt;   ..$ call          : chr "check_file_exists"</span></span>
<span><span class="co">#&gt;   ..$ use_cli_format: logi TRUE</span></span>
<span><span class="co">#&gt;   ..- attr(*, "class")= chr [1:5] "check_success" "hub_check" "rlang_message" "message" ...</span></span>
<span><span class="co">#&gt;  $ file_name     :List of 4</span></span>
<span><span class="co">#&gt;   ..$ message       : chr "File name \033[34m\"2022-10-08-team1-goodmodel.csv\"\033[39m is valid. \n "</span></span>
<span><span class="co">#&gt;   ..$ where         : chr "team1-goodmodel/2022-10-08-team1-goodmodel.csv"</span></span>
<span><span class="co">#&gt;   ..$ call          : chr "check_file_name"</span></span>
<span><span class="co">#&gt;   ..$ use_cli_format: logi TRUE</span></span>
<span><span class="co">#&gt;   ..- attr(*, "class")= chr [1:5] "check_success" "hub_check" "rlang_message" "message" ...</span></span>
<span><span class="co">#&gt;  $ file_location :List of 4</span></span>
<span><span class="co">#&gt;   ..$ message       : chr "File directory name matches `model_id`\n                                           metadata in file name. \n "</span></span>
<span><span class="co">#&gt;   ..$ where         : chr "team1-goodmodel/2022-10-08-team1-goodmodel.csv"</span></span>
<span><span class="co">#&gt;   ..$ call          : chr "check_file_location"</span></span>
<span><span class="co">#&gt;   ..$ use_cli_format: logi TRUE</span></span>
<span><span class="co">#&gt;   ..- attr(*, "class")= chr [1:5] "check_success" "hub_check" "rlang_message" "message" ...</span></span>
<span><span class="co">#&gt;  $ round_id_valid:List of 4</span></span>
<span><span class="co">#&gt;   ..$ message       : chr "`round_id` is valid. \n "</span></span>
<span><span class="co">#&gt;   ..$ where         : chr "team1-goodmodel/2022-10-08-team1-goodmodel.csv"</span></span>
<span><span class="co">#&gt;   ..$ call          : chr "check_valid_round_id"</span></span>
<span><span class="co">#&gt;   ..$ use_cli_format: logi TRUE</span></span>
<span><span class="co">#&gt;   ..- attr(*, "class")= chr [1:5] "check_success" "hub_check" "rlang_message" "message" ...</span></span>
<span><span class="co">#&gt;  $ file_format   :List of 4</span></span>
<span><span class="co">#&gt;   ..$ message       : chr "File is accepted hub format. \n "</span></span>
<span><span class="co">#&gt;   ..$ where         : chr "team1-goodmodel/2022-10-08-team1-goodmodel.csv"</span></span>
<span><span class="co">#&gt;   ..$ call          : chr "check_file_format"</span></span>
<span><span class="co">#&gt;   ..$ use_cli_format: logi TRUE</span></span>
<span><span class="co">#&gt;   ..- attr(*, "class")= chr [1:5] "check_success" "hub_check" "rlang_message" "message" ...</span></span></code></pre></div>
<p>Each <code>&lt;hub_check&gt;</code> objects contains the following
elements:</p>
<ul>
<li>
<code>message</code>: the result message containing details about
the check.</li>
<li>
<code>where:</code>: there the check was performed, usually the
model output file name.</li>
<li>
<code>call</code>: the function used to perform the check.</li>
<li>
<code>use_cli_format</code>: whether the message is formatted using
cli format, almost always TRUE.</li>
</ul>
</div>
<div class="section level2">
<h2 id="extra-information">Extra information<a class="anchor" aria-label="anchor" href="#extra-information"></a>
</h2>
<p>Some <code>&lt;hub_check&gt;</code> objects contain extra information
about the failing check to help identify affected rows in
submissions.</p>
<p>For example, the <code>&lt;hub_check&gt;</code> object returned for
the <code>valid_vals</code> check, which checks that all columns in a
model output file (excluding the <code>value</code> column) contain
valid combinations of task ID / output type / output type ID values
contains an additional element called <code>error_tbl</code>, with
details of the invalid value combinations in the rows affected.</p>
<p>To access <code>error_tbl</code> from the output of
<code><a href="../reference/validate_submission.html">validate_submission()</a></code> stored in an object <code>v</code>,
you would use:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">v</span><span class="op">$</span><span class="va">valid_vals</span><span class="op">$</span><span class="va">error_tbl</span></span></code></pre></div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Anna Krystalli, Evan Ray, Hugo Gruson.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0. PR Previews built by <a href="https://www.netlify.com" class="external-link">Netlify</a>. Provided without <strong>any warranty</strong>.</p>
</div>

    </footer>
</div>





  </body>
</html>
