<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Validating Pull Requests on GitHub • hubValidations</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Validating Pull Requests on GitHub">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">
    <a href="https://hubdocs.readthedocs.io/en/latest/" class="external-link"><img src="https://raw.githubusercontent.com/hubverse-org/hubStyle/main/inst/hubverse.png" id="logo" height="30" alt="hubverse"></a>
    <a class="navbar-brand me-2" href="../index.html">hubValidations</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.5.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"></ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/hub-validations-class.html">Structure of hub_validations class objects</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Validation for hub admins through CI</h6></li>
    <li><a class="dropdown-item" href="../articles/validate-pr.html">Validating Pull Requests on GitHub</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Validation for submitting teams</h6></li>
    <li><a class="dropdown-item" href="../articles/validate-submission.html">Validating submissions locally</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../articles/custom-functions.html">Including custom validation functions</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/hubverse-org/hubValidations/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">



<script src="validate-pr_files/kePrint-0.0.1/kePrint.js"></script><link href="validate-pr_files/lightable-0.0.1/lightable.css" rel="stylesheet">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Validating Pull Requests on GitHub</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/hubverse-org/hubValidations/blob/main/vignettes/articles/validate-pr.Rmd" class="external-link"><code>vignettes/articles/validate-pr.Rmd</code></a></small>
      <div class="d-none name"><code>validate-pr.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/hubverse-org/hubValidations" class="external-link">hubValidations</a></span><span class="op">)</span></span></code></pre></div>
<div class="section level2">
<h2 id="running-validation-checks-on-a-pull-request-with-validate_pr">Running validation checks on a Pull Request with
<code>validate_pr()</code><a class="anchor" aria-label="anchor" href="#running-validation-checks-on-a-pull-request-with-validate_pr"></a>
</h2>
<p>The <code><a href="../reference/validate_pr.html">validate_pr()</a></code> functions is designed to be used to
validate team submissions through Pull Requests on GitHub. Only model
output and model metadata files are individually validated using
<code><a href="../reference/validate_submission.html">validate_submission()</a></code> or
<code><a href="../reference/validate_model_metadata.html">validate_model_metadata()</a></code> respectively on each file
according to file type (<em>See the end of this article for details of
the standard checks performed on each file. For more information on
deploying optional or custom functions please check the article on <a href="articles/custom-functions.html">including custom functions</a>
(<code>vignette("custom-functions")</code>)</em>). As part of checks,
however, hub config files are also validated. Any other files included
in the PR are ignored but flagged in a message.</p>
<div class="section level3">
<h3 id="deploying-validate_pr-though-a-github-action-workflow">Deploying <code>validate_pr()</code> though a GitHub Action
workflow<a class="anchor" aria-label="anchor" href="#deploying-validate_pr-though-a-github-action-workflow"></a>
</h3>
<p>The most common way to deploy <code><a href="../reference/validate_pr.html">validate_pr()</a></code> is through a
GitHub Action that triggers when a pull request containing changes to
model output or model metadata files is opened. The hubverse maintains
the <a href="https://github.com/hubverse-org/hubverse-actions/tree/main/validate-submission" class="external-link"><strong><code>validate-submission.yaml</code></strong></a>
GitHub Action workflow template for deploying
<code><a href="../reference/validate_pr.html">validate_pr()</a></code>.</p>
<p>The latest release of the workflow can be added to hub’s GitHub
Action workflows using the <code>hubCI</code> package:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">hubCI</span><span class="fu">::</span><span class="fu">use_hub_github_action</span><span class="op">(</span><span class="st">"validate-submission"</span><span class="op">)</span></span></code></pre></div>
<p>The pertinent section of the workflow is:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Run validations</span></span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a><span class="at">        </span><span class="fu">env</span><span class="kw">:</span></span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a><span class="at">          </span><span class="fu">PR_NUMBER</span><span class="kw">:</span><span class="at"> ${{ github.event.number }}</span></span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a><span class="fu">        run</span><span class="kw">: </span><span class="ch">|</span></span>
<span id="cb3-5"><a href="#cb3-5" tabindex="-1"></a>          library("hubValidations")</span>
<span id="cb3-6"><a href="#cb3-6" tabindex="-1"></a>          v &lt;- hubValidations::validate_pr(</span>
<span id="cb3-7"><a href="#cb3-7" tabindex="-1"></a>              gh_repo = Sys.getenv("GITHUB_REPOSITORY"),</span>
<span id="cb3-8"><a href="#cb3-8" tabindex="-1"></a>              pr_number = Sys.getenv("PR_NUMBER"),</span>
<span id="cb3-9"><a href="#cb3-9" tabindex="-1"></a>              skip_submit_window_check = FALSE</span>
<span id="cb3-10"><a href="#cb3-10" tabindex="-1"></a>          )</span>
<span id="cb3-11"><a href="#cb3-11" tabindex="-1"></a>          hubValidations::check_for_errors(v, verbose = TRUE)</span>
<span id="cb3-12"><a href="#cb3-12" tabindex="-1"></a><span class="at">        </span><span class="fu">shell</span><span class="kw">:</span><span class="at"> Rscript {0}</span></span></code></pre></div>
<p>where <code><a href="../reference/validate_pr.html">validate_pr()</a></code> is called on the contents of the
current Pull Request, the results (an S3
<code>&lt;hub_validations&gt;</code> class object) is stored in
<code>v</code> and then <code><a href="../reference/check_for_errors.html">check_for_errors()</a></code> used to signal
whether overall validations have passed or failed and summarise any
validation failures.</p>
<p>Here’s an example of what the workflow looks like on GitHub:</p>
<p><img src="assets/ga-action-screenshot.png"><!-- --></p>
</div>
<div class="section level3">
<h3 id="ignoring-derived-task-ids-to-improve-performance">Ignoring derived task IDs to improve performance<a class="anchor" aria-label="anchor" href="#ignoring-derived-task-ids-to-improve-performance"></a>
</h3>
<p>Argument <strong><code>derived_task_ids</code></strong> allows for
the specification of <strong>task IDs that are derived from other task
IDs</strong> to be ignored, which <strong>can often lead to a
significant improvement in validation performance</strong>.</p>
<div class="section level4">
<h4 id="what-are-derived-task-ids">What are derived task IDs?<a class="anchor" aria-label="anchor" href="#what-are-derived-task-ids"></a>
</h4>
<p>Derived task IDs are a class of task ID whose values depend on the
values of other task IDs. As such, the <strong>validity of derived task
ID values is dependent on the values of the task IDs they are derived
from</strong> and the validity of value combinations of derived and
other task IDs is much more restricted. A common example of a derived
task ID is <code>target_end_date</code> which is most often derived from
the <code>reference_date</code> or <code>origin_date</code> and
<code>horizon</code> task ids.</p>
</div>
<div class="section level4">
<h4 id="implications-of-derived-task-ids-on-validation-performance">Implications of derived task IDs on validation performance<a class="anchor" aria-label="anchor" href="#implications-of-derived-task-ids-on-validation-performance"></a>
</h4>
<p>With standard validation, derived task IDs like
<code>target_end_date</code> tend to pollute the expanded grid used to
validate valid value combination with invalid combinations. That’s
because, while a given combination of <code>reference_date</code> and
<code>horizon</code> values will only have a single valid
<code>target_end_date</code> value, the <code>target_end_date</code>
property in the config will contain all possible valid values for all
combinations of <code>reference_date</code> and <code>horizon</code>.
Because its the values in the config used to create the expanded valid
values grid, the sizes these grids can reach as function of config
complexity can often put excessive strain on the system’s memory,
affecting overall performance of PR validation.</p>
</div>
<div class="section level4">
<h4 id="how-to-ignore-derived-task-ids">How to ignore derived task IDs<a class="anchor" aria-label="anchor" href="#how-to-ignore-derived-task-ids"></a>
</h4>
<p>Supplying the names of derived task IDs to argument
<code>derived_task_ids</code> will ignore them during validation checks
and, depending on config complexity, this <strong>can lead to a
significant improvement in validation performance</strong>.</p>
</div>
<div class="section level4 alert alert-warning" role="alert">
<h4 id="warning">Warning<a class="anchor" aria-label="anchor" href="#warning"></a>
</h4>
<p>Ignoring derived task IDs means that the validity of derived task ID
value combinations will not be check. It is therefore <strong>important
to ensure that the values of derived task IDs are correctly derived from
other task IDs through custom checks</strong>. For example, the values
of <code>target_end_date</code> can be checked by deploying optional
check <code><a href="../reference/opt_check_tbl_horizon_timediff.html">opt_check_tbl_horizon_timediff()</a></code>. See the article on
<a href="articles/custom-functions.html">including custom functions</a>
for more information.</p>
</div>
</div>
<div class="section level3">
<h3 id="skipping-submission-window-checks">Skipping submission window checks<a class="anchor" aria-label="anchor" href="#skipping-submission-window-checks"></a>
</h3>
<p>Most hubs require that model output files for a given round are
submitted within a submission window <a href="https://hubverse.io/en/latest/quickstart-hub-admin/tasks-config.html#setting-up-submissions-due" class="external-link">defined
in the <code>"submission_due"</code> property of the
<code>tasks.json</code> hub config file</a>.</p>
<p><code><a href="../reference/validate_pr.html">validate_pr()</a></code> includes submission window checks for
model output files and returns a
<code>&lt;warning/check_failure&gt;</code> condition class object if a
file is submitted outside the accepted submission window.</p>
<p>To disable submission window checks, argument
<code>skip_submit_window_check</code> can be set to
<code>TRUE</code>.</p>
</div>
<div class="section level3">
<h3 id="configuring-file-modificationdeletionrenaming-checks">Configuring file modification/deletion/renaming checks<a class="anchor" aria-label="anchor" href="#configuring-file-modificationdeletionrenaming-checks"></a>
</h3>
<p>For most hubs, <strong>modification, renaming or deletion of
previously submitted model output files</strong> or
<strong>deletion/renaming of previously submitted model metadata
files</strong> is not desirable without justification. They should
therefore trigger validation failure and notify hub maintainers of the
files affected. At the same time, most hubs prefer to allow
modifications to model output files within their allowed submission
window.</p>
<p>Reflecting these preferences, by default, <code><a href="../reference/validate_pr.html">validate_pr()</a></code>
checks for modification, renaming or deletion of previously submitted
model output files and deletion/renaming of previously submitted model
metadata files and appends a <code>&lt;error/check_error&gt;</code>
class objects to the output for each file modification/deletion/renaming
detected. It does however allow modifications to model output files
within their allowed submission window.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">temp_hub</span> <span class="op">&lt;-</span> <span class="fu">fs</span><span class="fu">::</span><span class="fu"><a href="https://fs.r-lib.org/reference/path.html" class="external-link">path</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"mod_del_hub"</span><span class="op">)</span></span>
<span><span class="fu">gert</span><span class="fu">::</span><span class="fu"><a href="https://docs.ropensci.org/gert/reference/git_fetch.html" class="external-link">git_clone</a></span><span class="op">(</span></span>
<span>  url <span class="op">=</span> <span class="st">"https://github.com/hubverse-org/ci-testhub-simple"</span>,</span>
<span>  path <span class="op">=</span> <span class="va">temp_hub</span>,</span>
<span>  branch <span class="op">=</span> <span class="st">"test-mod-del"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">v</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/validate_pr.html">validate_pr</a></span><span class="op">(</span></span>
<span>  hub_path <span class="op">=</span> <span class="va">temp_hub</span>,</span>
<span>  gh_repo <span class="op">=</span> <span class="st">"hubverse-org/ci-testhub-simple"</span>,</span>
<span>  pr_number <span class="op">=</span> <span class="fl">6</span>,</span>
<span>  skip_submit_window_check <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> PR contains commits to additional files which have not been checked:</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">•</span> <span style="color: #0000BB;">".github/workflows/validate_submission.yaml"</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">•</span> <span style="color: #0000BB;">"README.md"</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">•</span> <span style="color: #0000BB;">"hub-config/admin.json"</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">•</span> <span style="color: #0000BB;">"hub-config/model-metadata-schema.json"</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">•</span> <span style="color: #0000BB;">"hub-config/tasks.json"</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">•</span> <span style="color: #0000BB;">"model-metadata/README.md"</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">•</span> <span style="color: #0000BB;">"model-output/hub-baseline/README.txt"</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">•</span> <span style="color: #0000BB;">"random-file.txt"</span></span></span>
<span></span>
<span><span class="va">v</span></span>
<span><span class="co">#&gt; ::notice ::✔ mod_del_hub: All hub config files are valid.%0A✖ 2022-10-08-hub-baseline.csv: Previously submitted model output files must not%0A  be modified.  <span style="color: #0000BB;">model-output/hub-baseline/2022-10-08-hub-baseline.csv</span> modified.%0A✖ 2022-10-15-team1-goodmodel.csv: Previously submitted model output files must%0A  not be removed.  <span style="color: #0000BB;">model-output/team1-goodmodel/2022-10-15-team1-goodmodel.csv</span>%0A  removed.%0A✖ team1-goodmodel.yaml: Previously submitted model metadata files must not be%0A  removed.  <span style="color: #0000BB;">model-metadata/team1-goodmodel.yaml</span> removed.%0A✔ 2022-10-08-hub-baseline.csv: File exists at path%0A  <span style="color: #0000BB;">model-output/hub-baseline/2022-10-08-hub-baseline.csv</span>.%0A✔ 2022-10-08-hub-baseline.csv: File name <span style="color: #0000BB;">"2022-10-08-hub-baseline.csv"</span> is%0A  valid.%0A✔ 2022-10-08-hub-baseline.csv: File directory name matches `model_id` metadata%0A  in file name.%0A✔ 2022-10-08-hub-baseline.csv: `round_id` is valid.%0A✔ 2022-10-08-hub-baseline.csv: File is accepted hub format.%0A✔ 2022-10-08-hub-baseline.csv: Metadata file exists at path%0A  <span style="color: #0000BB;">model-metadata/hub-baseline.yml</span>.%0A✔ 2022-10-08-hub-baseline.csv: File could be read successfully.%0A✔ 2022-10-08-hub-baseline.csv: `round_id_col` name is valid.%0A✔ 2022-10-08-hub-baseline.csv: `round_id` column <span style="color: #0000BB;">"origin_date"</span> contains a%0A  single, unique round ID value.%0A✔ 2022-10-08-hub-baseline.csv: All `round_id_col` <span style="color: #0000BB;">"origin_date"</span> values match%0A  submission `round_id` from file name.%0A✔ 2022-10-08-hub-baseline.csv: Column names are consistent with expected round%0A  task IDs and std column names.%0A✔ 2022-10-08-hub-baseline.csv: Column data types match hub schema.%0A✔ 2022-10-08-hub-baseline.csv: `tbl` contains valid values/value combinations.%0A✔ 2022-10-08-hub-baseline.csv: All combinations of task ID%0A  column/`output_type`/`output_type_id` values are unique.%0A✔ 2022-10-08-hub-baseline.csv: Required task ID/output type/output type ID%0A  combinations all present.%0A✔ 2022-10-08-hub-baseline.csv: Values in column `value` all valid with respect%0A  to modeling task config.%0A✔ 2022-10-08-hub-baseline.csv: Values in `value` column are non-decreasing as%0A  output_type_ids increase for all unique task ID value/output type%0A  combinations of quantile or cdf output types.%0Aℹ 2022-10-08-hub-baseline.csv: No pmf output types to check for sum of 1. Check%0A  skipped.%0Aℹ 2022-10-08-hub-baseline.csv: No v3 samples found in model output data to%0A  check. Skipping `check_tbl_spl_compound_taskid_set` check.%0Aℹ 2022-10-08-hub-baseline.csv: No v3 samples found in model output data to%0A  check. Skipping `check_tbl_spl_compound_tid` check.%0Aℹ 2022-10-08-hub-baseline.csv: No v3 samples found in model output data to%0A  check. Skipping `check_tbl_spl_non_compound_tid` check.%0Aℹ 2022-10-08-hub-baseline.csv: No v3 samples found in model output data to%0A  check. Skipping `check_tbl_spl_n` check.%0A✔ 2022-10-22-team1-goodmodel.csv: File exists at path%0A  <span style="color: #0000BB;">model-output/team1-goodmodel/2022-10-22-team1-goodmodel.csv</span>.%0A✔ 2022-10-22-team1-goodmodel.csv: File name <span style="color: #0000BB;">"2022-10-22-team1-goodmodel.csv"</span> is%0A  valid.%0A✔ 2022-10-22-team1-goodmodel.csv: File directory name matches `model_id`%0A  metadata in file name.%0A✔ 2022-10-22-team1-goodmodel.csv: `round_id` is valid.%0A✔ 2022-10-22-team1-goodmodel.csv: File is accepted hub format.%0A✖ 2022-10-22-team1-goodmodel.csv: Metadata file does not exist at path%0A  <span style="color: #0000BB;">model-metadata/team1-goodmodel.yml</span> or <span style="color: #0000BB;">model-metadata/team1-goodmodel.yaml</span>.</span></span></code></pre></div>
<p>These settings can be modified if required though the use of
arguments <code>file_modification_check</code> and
<code>allow_submit_window_mods</code>.</p>
<ul>
<li>
<p><strong><code>file_modification_check</code></strong> controls
whether modification/deletion checks are performed, what is returned if
modifications/deletions are detected and accepts one of the following
values:</p>
<ul>
<li>
<strong><code>"error"</code></strong>: Appends a
<code>&lt;error/check_error&gt;</code> condition class object for each
applicable modified/deleted file. Will result in validation workflow
failure.</li>
<li>
<strong><code>"warning"</code></strong>: Appends a
<code>&lt;warning/check_warning&gt;</code> condition class object for
each applicable modified/deleted file. Will result in validation
workflow failure.</li>
<li>
<strong><code>"message"</code></strong>: Appends a
<code>&lt;message/check_info&gt;</code> condition class object for each
applicable modified/deleted file. Will not result in validation workflow
failure.</li>
<li>
<strong><code>"none"</code></strong>: No modification/deletion
checks performed.</li>
</ul>
</li>
<li><p><strong><code>allow_submit_window_mods</code></strong> controls
whether modifications/deletions of model output files are allowed within
their submission windows. Is set to <code>TRUE</code> by default but can
be set to <code>FALSE</code> if modifications/deletions are not allowed,
regardless of timing. Is ignored when checking model metadata files as
well as when <code>file_modification_check</code> is set to
<code>"none"</code>.</p></li>
</ul>
<div class="section level4 alert alert-warning" role="alert">
<h4 id="warning-1">Warning<a class="anchor" aria-label="anchor" href="#warning-1"></a>
</h4>
<p>Note that to establish <strong>relative</strong> submission windows
when performing modification/deletion checks and
<code>allow_submit_window_mods</code> is <code>TRUE</code>, the
reference date is taken as the <code>round_id</code> extracted from the
file path. This is because we cannot extract dates from columns of
deleted files. If hub submission window reference dates do not match
round IDs in file paths, currently <code>allow_submit_window_mods</code>
will not work correctly and is best set to <code>FALSE</code>. This only
relates to hubs/rounds where submission windows are determined relative
to a reference date and not when explicit submission window start and
end dates are provided in the config.</p>
<p>For more details on submission window config see <a href="https://hubverse.io/en/latest/quickstart-hub-admin/tasks-config.html#setting-up-submissions-due" class="external-link">Setting
up <code>"submission_due"</code></a> in the hubverse hubDocs.</p>
</div>
</div>
</div>
<div class="section level2">
<h2 id="checking-for-validation-failures-with-check_for_errors">Checking for validation failures with
<code>check_for_errors()</code><a class="anchor" aria-label="anchor" href="#checking-for-validation-failures-with-check_for_errors"></a>
</h2>
<p><code><a href="../reference/check_for_errors.html">check_for_errors()</a></code> is used to inspect a
<code>hub_validations</code> class object, determine whether overall
validations have passed or failed and summarise any detected
errors/failures.</p>
<div class="section level3">
<h3 id="validation-failure">Validation failure<a class="anchor" aria-label="anchor" href="#validation-failure"></a>
</h3>
<p>If any elements of the <code>hub_validations</code> object contain
<code>&lt;error/check_error&gt;</code>,
<code>&lt;warning/check_warning&gt;</code> or
<code>&lt;error/check_exec_error&gt;</code> condition class objects, the
function throws an error and prints the messages from the failing
checks.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">temp_hub</span> <span class="op">&lt;-</span> <span class="fu">fs</span><span class="fu">::</span><span class="fu"><a href="https://fs.r-lib.org/reference/path.html" class="external-link">path</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"invalid_sb_hub"</span><span class="op">)</span></span>
<span><span class="fu">gert</span><span class="fu">::</span><span class="fu"><a href="https://docs.ropensci.org/gert/reference/git_fetch.html" class="external-link">git_clone</a></span><span class="op">(</span></span>
<span>  url <span class="op">=</span> <span class="st">"https://github.com/hubverse-org/ci-testhub-simple"</span>,</span>
<span>  path <span class="op">=</span> <span class="va">temp_hub</span>,</span>
<span>  branch <span class="op">=</span> <span class="st">"pr-missing-taskid"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">v_fail</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/validate_pr.html">validate_pr</a></span><span class="op">(</span></span>
<span>  hub_path <span class="op">=</span> <span class="va">temp_hub</span>,</span>
<span>  gh_repo <span class="op">=</span> <span class="st">"hubverse-org/ci-testhub-simple"</span>,</span>
<span>  pr_number <span class="op">=</span> <span class="fl">5</span>,</span>
<span>  skip_submit_window_check <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> PR contains commits to additional files which have not been checked:</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">•</span> <span style="color: #0000BB;">".github/workflows/validate_submission.yaml"</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">•</span> <span style="color: #0000BB;">"hub-config/admin.json"</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">•</span> <span style="color: #0000BB;">"hub-config/model-metadata-schema.json"</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">•</span> <span style="color: #0000BB;">"hub-config/tasks.json"</span></span></span>
<span></span>
<span><span class="fu"><a href="../reference/check_for_errors.html">check_for_errors</a></span><span class="op">(</span><span class="va">v_fail</span><span class="op">)</span></span>
<span><span class="co">#&gt; ::notice ::✖ 2022-10-22-hub-baseline.parquet: Column names must be consistent with%0A  expected round task IDs and std column names.  Expected column <span style="color: #0000BB;">"age_group"</span>%0A  not present in file.</span></span>
<span><span class="co">#&gt; <span style="color: #BBBB00; font-weight: bold;">Error</span><span style="font-weight: bold;"> in `check_for_errors()`:</span></span></span>
<span><span class="co">#&gt; <span style="color: #BBBB00;">!</span> </span></span>
<span><span class="co">#&gt; The validation checks produced some failures/errors reported above.</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="validation-success">Validation success<a class="anchor" aria-label="anchor" href="#validation-success"></a>
</h3>
<p>If all validations checks pass, <code><a href="../reference/check_for_errors.html">check_for_errors()</a></code>
returns <code>TRUE</code> silently and prints:</p>
<pre><code>✔ All validation checks have been successful.</code></pre>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">temp_hub</span> <span class="op">&lt;-</span> <span class="fu">fs</span><span class="fu">::</span><span class="fu"><a href="https://fs.r-lib.org/reference/path.html" class="external-link">path</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"valid_sb_hub"</span><span class="op">)</span></span>
<span><span class="fu">gert</span><span class="fu">::</span><span class="fu"><a href="https://docs.ropensci.org/gert/reference/git_fetch.html" class="external-link">git_clone</a></span><span class="op">(</span></span>
<span>  url <span class="op">=</span> <span class="st">"https://github.com/hubverse-org/ci-testhub-simple"</span>,</span>
<span>  path <span class="op">=</span> <span class="va">temp_hub</span>,</span>
<span>  branch <span class="op">=</span> <span class="st">"pr-valid"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">v_pass</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/validate_pr.html">validate_pr</a></span><span class="op">(</span></span>
<span>  hub_path <span class="op">=</span> <span class="va">temp_hub</span>,</span>
<span>  gh_repo <span class="op">=</span> <span class="st">"hubverse-org/ci-testhub-simple"</span>,</span>
<span>  pr_number <span class="op">=</span> <span class="fl">4</span>,</span>
<span>  skip_submit_window_check <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> PR contains commits to additional files which have not been checked:</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">•</span> <span style="color: #0000BB;">".github/workflows/validate_submission.yaml"</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">•</span> <span style="color: #0000BB;">"hub-config/admin.json"</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">•</span> <span style="color: #0000BB;">"hub-config/model-metadata-schema.json"</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">•</span> <span style="color: #0000BB;">"hub-config/tasks.json"</span></span></span>
<span></span>
<span><span class="fu"><a href="../reference/check_for_errors.html">check_for_errors</a></span><span class="op">(</span><span class="va">v_pass</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> All validation checks have been successful.</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="verbose-output">Verbose output<a class="anchor" aria-label="anchor" href="#verbose-output"></a>
</h3>
<p>If printing the results of all checks is preferred instead of just
summarising the results of checks that failed, argument
<code>verbose</code> can be set to <code>TRUE</code>.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/check_for_errors.html">check_for_errors</a></span><span class="op">(</span><span class="va">v_fail</span>, verbose <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Individual check results</span> ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ::notice ::✔ invalid_sb_hub: All hub config files are valid.%0A✔ 2022-10-22-hub-baseline.parquet: File exists at path%0A  <span style="color: #0000BB;">model-output/hub-baseline/2022-10-22-hub-baseline.parquet</span>.%0A✔ 2022-10-22-hub-baseline.parquet: File name <span style="color: #0000BB;">"2022-10-22-hub-baseline.parquet"</span>%0A  is valid.%0A✔ 2022-10-22-hub-baseline.parquet: File directory name matches `model_id`%0A  metadata in file name.%0A✔ 2022-10-22-hub-baseline.parquet: `round_id` is valid.%0A✔ 2022-10-22-hub-baseline.parquet: File is accepted hub format.%0A✔ 2022-10-22-hub-baseline.parquet: Metadata file exists at path%0A  <span style="color: #0000BB;">model-metadata/hub-baseline.yml</span>.%0A✔ 2022-10-22-hub-baseline.parquet: File could be read successfully.%0A✔ 2022-10-22-hub-baseline.parquet: `round_id_col` name is valid.%0A✔ 2022-10-22-hub-baseline.parquet: `round_id` column <span style="color: #0000BB;">"origin_date"</span> contains a%0A  single, unique round ID value.%0A✔ 2022-10-22-hub-baseline.parquet: All `round_id_col` <span style="color: #0000BB;">"origin_date"</span> values%0A  match submission `round_id` from file name.%0A✖ 2022-10-22-hub-baseline.parquet: Column names must be consistent with%0A  expected round task IDs and std column names.  Expected column <span style="color: #0000BB;">"age_group"</span>%0A  not present in file.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">Overall validation result</span> <span style="color: #00BBBB;">───────────────────────────────────────────────────</span></span></span>
<span><span class="co">#&gt; ::notice ::✖ 2022-10-22-hub-baseline.parquet: Column names must be consistent with%0A  expected round task IDs and std column names.  Expected column <span style="color: #0000BB;">"age_group"</span>%0A  not present in file.</span></span>
<span><span class="co">#&gt; <span style="color: #BBBB00; font-weight: bold;">Error</span><span style="font-weight: bold;"> in `check_for_errors()`:</span></span></span>
<span><span class="co">#&gt; <span style="color: #BBBB00;">!</span> </span></span>
<span><span class="co">#&gt; The validation checks produced some failures/errors reported above.</span></span>
<span></span>
<span></span>
<span><span class="fu"><a href="../reference/check_for_errors.html">check_for_errors</a></span><span class="op">(</span><span class="va">v_pass</span>, verbose <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Individual check results</span> ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ::notice ::✔ valid_sb_hub: All hub config files are valid.%0A✔ 2022-10-22-team1-goodmodel.csv: File exists at path%0A  <span style="color: #0000BB;">model-output/team1-goodmodel/2022-10-22-team1-goodmodel.csv</span>.%0A✔ 2022-10-22-team1-goodmodel.csv: File name <span style="color: #0000BB;">"2022-10-22-team1-goodmodel.csv"</span> is%0A  valid.%0A✔ 2022-10-22-team1-goodmodel.csv: File directory name matches `model_id`%0A  metadata in file name.%0A✔ 2022-10-22-team1-goodmodel.csv: `round_id` is valid.%0A✔ 2022-10-22-team1-goodmodel.csv: File is accepted hub format.%0A✔ 2022-10-22-team1-goodmodel.csv: Metadata file exists at path%0A  <span style="color: #0000BB;">model-metadata/team1-goodmodel.yaml</span>.%0A✔ 2022-10-22-team1-goodmodel.csv: File could be read successfully.%0A✔ 2022-10-22-team1-goodmodel.csv: `round_id_col` name is valid.%0A✔ 2022-10-22-team1-goodmodel.csv: `round_id` column <span style="color: #0000BB;">"origin_date"</span> contains a%0A  single, unique round ID value.%0A✔ 2022-10-22-team1-goodmodel.csv: All `round_id_col` <span style="color: #0000BB;">"origin_date"</span> values match%0A  submission `round_id` from file name.%0A✔ 2022-10-22-team1-goodmodel.csv: Column names are consistent with expected%0A  round task IDs and std column names.%0A✔ 2022-10-22-team1-goodmodel.csv: Column data types match hub schema.%0A✔ 2022-10-22-team1-goodmodel.csv: `tbl` contains valid values/value%0A  combinations.%0A✔ 2022-10-22-team1-goodmodel.csv: All combinations of task ID%0A  column/`output_type`/`output_type_id` values are unique.%0A✔ 2022-10-22-team1-goodmodel.csv: Required task ID/output type/output type ID%0A  combinations all present.%0A✔ 2022-10-22-team1-goodmodel.csv: Values in column `value` all valid with%0A  respect to modeling task config.%0A✔ 2022-10-22-team1-goodmodel.csv: Values in `value` column are non-decreasing%0A  as output_type_ids increase for all unique task ID value/output type%0A  combinations of quantile or cdf output types.%0Aℹ 2022-10-22-team1-goodmodel.csv: No pmf output types to check for sum of 1.%0A  Check skipped.%0Aℹ 2022-10-22-team1-goodmodel.csv: No v3 samples found in model output data to%0A  check. Skipping `check_tbl_spl_compound_taskid_set` check.%0Aℹ 2022-10-22-team1-goodmodel.csv: No v3 samples found in model output data to%0A  check. Skipping `check_tbl_spl_compound_tid` check.%0Aℹ 2022-10-22-team1-goodmodel.csv: No v3 samples found in model output data to%0A  check. Skipping `check_tbl_spl_non_compound_tid` check.%0Aℹ 2022-10-22-team1-goodmodel.csv: No v3 samples found in model output data to%0A  check. Skipping `check_tbl_spl_n` check.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">Overall validation result</span> <span style="color: #00BBBB;">───────────────────────────────────────────────────</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> All validation checks have been successful.</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="validate_pr-check-details">
<code>validate_pr</code> check details<a class="anchor" aria-label="anchor" href="#validate_pr-check-details"></a>
</h2>
<p>For details on the structure of <code>&lt;hub_validations&gt;</code>
objects, including on how to access more information about specific
checks, see <code>vignette("hub-validations-class")</code>.</p>
<div class="section level3">
<h3 id="checks-on-model-output-files">Checks on model output files<a class="anchor" aria-label="anchor" href="#checks-on-model-output-files"></a>
</h3>
<table class="table table table-striped table-hover table-condensed table-responsive" style="margin-left: auto; margin-right: auto;">
<caption>
Details of checks performed by <code><a href="../reference/validate_submission.html">validate_submission()</a></code> on
model output files.
</caption>
<thead><tr>
<th style="text-align:left;">
Name
</th>
<th style="text-align:left;">
Check
</th>
<th style="text-align:left;">
Early return
</th>
<th style="text-align:left;">
Fail output
</th>
<th style="text-align:left;">
Extra info
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;font-weight: bold;">
valid_config
</td>
<td style="text-align:left;">
Hub config valid
</td>
<td style="text-align:left;">
TRUE
</td>
<td style="text-align:left;">
check_error
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
submission_time
</td>
<td style="text-align:left;">
Current time within file submission window
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
check_failure
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
file_exists
</td>
<td style="text-align:left;">
File exists at <code>file_path</code> provided
</td>
<td style="text-align:left;">
TRUE
</td>
<td style="text-align:left;">
check_error
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
file_name
</td>
<td style="text-align:left;">
File name valid
</td>
<td style="text-align:left;">
TRUE
</td>
<td style="text-align:left;">
check_error
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
file_location
</td>
<td style="text-align:left;">
File located in correct team directory
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
check_failure
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
round_id_valid
</td>
<td style="text-align:left;">
File round ID is valid hub round IDs
</td>
<td style="text-align:left;">
TRUE
</td>
<td style="text-align:left;">
check_error
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
file_format
</td>
<td style="text-align:left;">
File format is accepted hub/round format
</td>
<td style="text-align:left;">
TRUE
</td>
<td style="text-align:left;">
check_error
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
metadata_exists
</td>
<td style="text-align:left;">
Model metadata file exists in expected location
</td>
<td style="text-align:left;">
TRUE
</td>
<td style="text-align:left;">
check_error
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
file_read
</td>
<td style="text-align:left;">
File can be read without errors
</td>
<td style="text-align:left;">
TRUE
</td>
<td style="text-align:left;">
check_error
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
valid_round_id_col
</td>
<td style="text-align:left;">
Round ID var from config exists in data column names. Skipped if
<code>round_id_from_var</code> is FALSE in config.
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
check_failure
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
unique_round_id
</td>
<td style="text-align:left;">
Round ID column contains a single unique round ID. Skipped if
<code>round_id_from_var</code> is FALSE in config.
</td>
<td style="text-align:left;">
TRUE
</td>
<td style="text-align:left;">
check_error
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
match_round_id
</td>
<td style="text-align:left;">
Round ID from file contents matches round ID from file name. Skipped if
<code>round_id_from_var</code> is FALSE in config.
</td>
<td style="text-align:left;">
TRUE
</td>
<td style="text-align:left;">
check_error
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
colnames
</td>
<td style="text-align:left;">
File column names match expected column names for round (i.e. task ID
names + hub standard column names)
</td>
<td style="text-align:left;">
TRUE
</td>
<td style="text-align:left;">
check_error
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
col_types
</td>
<td style="text-align:left;">
File column types match expected column types from config. Mainly
applicable to parquet &amp; arrow files.
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
check_failure
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
valid_vals
</td>
<td style="text-align:left;">
Columns (excluding <code>value</code> column) contain valid combinations
of task ID / output type / output type ID values
</td>
<td style="text-align:left;">
TRUE
</td>
<td style="text-align:left;">
check_error
</td>
<td style="text-align:left;">
error_tbl: table of invalid task ID/output type/output type ID value
combinations
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
rows_unique
</td>
<td style="text-align:left;">
Columns (excluding <code>value</code> column) contain unique
combinations of task ID / output type / output type ID values
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
check_failure
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
req_vals
</td>
<td style="text-align:left;">
Columns (excluding <code>value</code> column) contain all required
combinations of task ID / output type / output type ID values
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
check_failure
</td>
<td style="text-align:left;">
missing_df: table of missing task ID/output type/output type ID value
combinations
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
value_col_valid
</td>
<td style="text-align:left;">
Values in <code>value</code> column are coercible to data type
configured for each output type
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
check_failure
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
value_col_non_desc
</td>
<td style="text-align:left;">
Values in <code>value</code> column are non-decreasing as
output_type_ids increase for all unique task ID /output type value
combinations. Applies to <code>quantile</code> or <code>cdf</code>
output types only
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
check_failure
</td>
<td style="text-align:left;">
error_tbl: table of rows affected
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
value_col_sum1
</td>
<td style="text-align:left;">
Values in the <code>value</code> column of <code>pmf</code> output type
data for each unique task ID combination sum to 1.
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
check_failure
</td>
<td style="text-align:left;">
error_tbl: table of rows affected
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
spl_compound_taskid_set
</td>
<td style="text-align:left;">
Sample compound task id sets for each modeling task match or are coarser
than the expected set defined in tasks.json config.
</td>
<td style="text-align:left;">
TRUE
</td>
<td style="text-align:left;">
check_error
</td>
<td style="text-align:left;">
errors: list containing item for each failing modeling task. Exact
structure dependent on type of validation failure. See check function
documentation for more details.
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
spl_compound_tid
</td>
<td style="text-align:left;">
Samples contain single unique values for each compound task ID within
individual samples (v3 and above schema only).
</td>
<td style="text-align:left;">
TRUE
</td>
<td style="text-align:left;">
check_error
</td>
<td style="text-align:left;">
errors: list containing item for each sample failing validation with
breakdown of unique values for each compound task ID.
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
spl_non_compound_tid
</td>
<td style="text-align:left;">
Samples contain single unique combination of non-compound task ID values
across all samples (v3 and above schema only).
</td>
<td style="text-align:left;">
TRUE
</td>
<td style="text-align:left;">
check_error
</td>
<td style="text-align:left;">
errors: list containing item for each modeling task with vectors of
output type ids of samples failing validation and example table of most
frequent non-compound task ID value combination across all samples in
the modeling task.
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
spl_n
</td>
<td style="text-align:left;">
Number of samples for a given compound idx falls within accepted
compound task range (v3 and above schema only).
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
check_failure
</td>
<td style="text-align:left;">
errors: list containing item for each compound_idx failing validation
with sample count, metadata on expected samples and example table of
expected structure for samples belonging to the compound idx in
question.
</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="checks-on-model-metadata-files">Checks on model metadata files<a class="anchor" aria-label="anchor" href="#checks-on-model-metadata-files"></a>
</h3>
<table class="table table table-striped table-hover table-condensed table-responsive" style="margin-left: auto; margin-right: auto;">
<caption>
Details of checks performed by <code><a href="../reference/validate_model_metadata.html">validate_model_metadata()</a></code> on
model metadata files.
</caption>
<thead><tr>
<th style="text-align:left;">
Name
</th>
<th style="text-align:left;">
Check
</th>
<th style="text-align:left;">
Early return
</th>
<th style="text-align:left;">
Fail output
</th>
<th style="text-align:left;">
Extra info
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;font-weight: bold;">
metadata_schema_exists
</td>
<td style="text-align:left;">
A model metadata schema file exists in <code>hub-config</code>
directory.
</td>
<td style="text-align:left;">
TRUE
</td>
<td style="text-align:left;">
check_error
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
metadata_file_exists
</td>
<td style="text-align:left;">
A file with name provided to argument <code>file_path</code> exists at
the expected location (the <code>model-metadata</code> directory).
</td>
<td style="text-align:left;">
TRUE
</td>
<td style="text-align:left;">
check_error
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
metadata_file_ext
</td>
<td style="text-align:left;">
The metadata file has correct extension (yaml or yml).
</td>
<td style="text-align:left;">
TRUE
</td>
<td style="text-align:left;">
check_error
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
metadata_file_location
</td>
<td style="text-align:left;">
The metadata file has been saved to correct location.
</td>
<td style="text-align:left;">
TRUE
</td>
<td style="text-align:left;">
check_failure
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
metadata_matches_schema
</td>
<td style="text-align:left;">
The contents of the metadata file match the hub’s model metadata schema
</td>
<td style="text-align:left;">
TRUE
</td>
<td style="text-align:left;">
check_error
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
metadata_file_name
</td>
<td style="text-align:left;">
The metadata filename matches the model ID specified in the contents of
the file.
</td>
<td style="text-align:left;">
TRUE
</td>
<td style="text-align:left;">
check_error
</td>
<td style="text-align:left;">
</td>
</tr>
</tbody>
</table>
<div class="section level4 alert alert-info" role="alert">
<h4 id="custom-checks">Custom checks<a class="anchor" aria-label="anchor" href="#custom-checks"></a>
</h4>
<p>The standard checks discussed here are the checks deployed by default
by the <code>validate_pr</code> function. For more information on
deploying optional or custom functions please check the article on <a href="articles/custom-functions.html">including custom functions</a>
(<code>vignette("custom-functions")</code>).</p>
</div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Anna Krystalli, Evan Ray, Hugo Gruson.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0. PR Previews built by <a href="https://www.netlify.com" class="external-link">Netlify</a>. Provided without <strong>any warranty</strong>.</p>
</div>

    </footer>
</div>





  </body>
</html>
