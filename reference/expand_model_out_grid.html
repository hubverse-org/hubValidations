<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Create expanded grid of valid task ID and output type value combinations — expand_model_out_grid • hubValidations</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Create expanded grid of valid task ID and output type value combinations — expand_model_out_grid"><meta name="description" content="Create expanded grid of valid task ID and output type value combinations"><meta property="og:description" content="Create expanded grid of valid task ID and output type value combinations"><meta property="og:image" content="https://hubverse-org.github.io/hubValidations/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">
    <a href="https://hubdocs.readthedocs.io/en/latest/" class="external-link"><img src="https://raw.githubusercontent.com/hubverse-org/hubStyle/main/inst/hubverse.png" id="logo" height="30" alt="hubverse"></a>
    <a class="navbar-brand me-2" href="../index.html">hubValidations</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.13.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"></ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/hub-validations-class.html">hub_validations class structure</a></li>
    <li><a class="dropdown-item" href="../articles/validate-pr.html">Validating model output PRs</a></li>
    <li><a class="dropdown-item" href="../articles/validate-target-pr.html">Validating target data PRs</a></li>
    <li><a class="dropdown-item" href="../articles/validate-submission.html">Validating hub data locally</a></li>
    <li><a class="dropdown-item" href="../articles/writing-custom-fns.html">Writing custom checks</a></li>
    <li><a class="dropdown-item" href="../articles/deploying-custom-functions.html">Deploying custom checks</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/hubverse-org/hubValidations/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Create expanded grid of valid task ID and output type value combinations</h1>
      <small class="dont-index">Source: <a href="https://github.com/hubverse-org/hubValidations/blob/v0.13.0/R/expand_model_out_grid.R" class="external-link"><code>R/expand_model_out_grid.R</code></a></small>
      <div class="d-none name"><code>expand_model_out_grid.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Create expanded grid of valid task ID and output type value combinations</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">expand_model_out_grid</span><span class="op">(</span></span>
<span>  <span class="va">config_tasks</span>,</span>
<span>  <span class="va">round_id</span>,</span>
<span>  required_vals_only <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  force_output_types <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  all_character <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  output_type_id_datatype <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"from_config"</span>, <span class="st">"auto"</span>, <span class="st">"character"</span>, <span class="st">"double"</span>, <span class="st">"integer"</span>,</span>
<span>    <span class="st">"logical"</span>, <span class="st">"Date"</span><span class="op">)</span>,</span>
<span>  as_arrow_table <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  bind_model_tasks <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  include_sample_ids <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  compound_taskid_set <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  output_types <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  derived_task_ids <span class="op">=</span> <span class="fu"><a href="get_config_derived_task_ids.html">get_config_derived_task_ids</a></span><span class="op">(</span><span class="va">config_tasks</span>, <span class="va">round_id</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-config-tasks">config_tasks<a class="anchor" aria-label="anchor" href="#arg-config-tasks"></a></dt>
<dd><p>a list version of the content's of a hub's <code>tasks.json</code>
config file, accessed through the <code>"config_tasks"</code> attribute of a <code>&lt;hub_connection&gt;</code>
object or function <code><a href="https://hubverse-org.github.io/hubUtils/reference/read_config.html" class="external-link">hubUtils::read_config()</a></code>.</p></dd>


<dt id="arg-round-id">round_id<a class="anchor" aria-label="anchor" href="#arg-round-id"></a></dt>
<dd><p>Character string. Round identifier. If the round is set to
<code>round_id_from_variable: true</code>, IDs are values of the task ID defined in the round's
<code>round_id</code> property of <code>config_tasks</code>.
Otherwise should match round's <code>round_id</code> value in config. Ignored if hub
contains only a single round.</p></dd>


<dt id="arg-required-vals-only">required_vals_only<a class="anchor" aria-label="anchor" href="#arg-required-vals-only"></a></dt>
<dd><p>Logical. Whether to return only combinations of
Task ID and related output type ID required values.</p></dd>


<dt id="arg-force-output-types">force_output_types<a class="anchor" aria-label="anchor" href="#arg-force-output-types"></a></dt>
<dd><p>Logical. Whether to force all output types to be required.
If <code>TRUE</code>, all output type ID values are treated as required regardless
of the value of the <code>is_required</code> property. Useful for creating grids of required
values for optional output types.</p></dd>


<dt id="arg-all-character">all_character<a class="anchor" aria-label="anchor" href="#arg-all-character"></a></dt>
<dd><p>Logical. Whether to return all character column.</p></dd>


<dt id="arg-output-type-id-datatype">output_type_id_datatype<a class="anchor" aria-label="anchor" href="#arg-output-type-id-datatype"></a></dt>
<dd><p>character string. One of <code>"from_config"</code>, <code>"auto"</code>,
<code>"character"</code>, <code>"double"</code>, <code>"integer"</code>, <code>"logical"</code>, <code>"Date"</code>.
Defaults to <code>"from_config"</code> which uses the setting in the <code>output_type_id_datatype</code>
property in the <code>tasks.json</code> config file if available. If the property is
not set in the config, the argument falls back to <code>"auto"</code> which determines
the  <code>output_type_id</code> data type automatically from the <code>tasks.json</code>
config file as the simplest data type required to represent all output
type ID values across all output types in the hub.
When only point estimate output types (where <code>output_type_id</code>s are <code>NA</code>,) are
being collected by a hub, the <code>output_type_id</code> column is assigned a <code>character</code>
data type when auto-determined.
Other data type values can be used to override automatic determination.
Note that attempting to coerce <code>output_type_id</code> to a data type that is
not valid for the data (e.g. trying to coerce<code>"character"</code> values to
<code>"double"</code>) will likely result in an error or potentially unexpected
behaviour so use with care.</p></dd>


<dt id="arg-as-arrow-table">as_arrow_table<a class="anchor" aria-label="anchor" href="#arg-as-arrow-table"></a></dt>
<dd><p>Logical. Whether to return an arrow table. Defaults to <code>FALSE</code>.</p></dd>


<dt id="arg-bind-model-tasks">bind_model_tasks<a class="anchor" aria-label="anchor" href="#arg-bind-model-tasks"></a></dt>
<dd><p>Logical. Whether to bind expanded grids of
values from multiple modeling tasks into a single tibble/arrow table or
return a list.</p></dd>


<dt id="arg-include-sample-ids">include_sample_ids<a class="anchor" aria-label="anchor" href="#arg-include-sample-ids"></a></dt>
<dd><p>Logical. Whether to include sample identifiers in
the <code>output_type_id</code> column.</p></dd>


<dt id="arg-compound-taskid-set">compound_taskid_set<a class="anchor" aria-label="anchor" href="#arg-compound-taskid-set"></a></dt>
<dd><p>List of character vectors, one for each modeling task
in the round. Can be used to override the compound task ID set defined in the
config. If <code>NULL</code> is provided for a given modeling task, a compound task ID set of
all task IDs is used.</p></dd>


<dt id="arg-output-types">output_types<a class="anchor" aria-label="anchor" href="#arg-output-types"></a></dt>
<dd><p>Character vector of output type names to include.
Use to subset for grids for specific output types.</p></dd>


<dt id="arg-derived-task-ids">derived_task_ids<a class="anchor" aria-label="anchor" href="#arg-derived-task-ids"></a></dt>
<dd><p>Character vector of derived task ID names (task IDs whose
values depend on other task IDs) to ignore. Columns for such task ids will
contain <code>NA</code>s. Defaults to extracting derived task IDs from <code>config_tasks</code>. See
<code><a href="get_config_derived_task_ids.html">get_config_derived_task_ids()</a></code> for more details.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>If <code>bind_model_tasks = TRUE</code> (default) a tibble or arrow table
containing all possible task ID and related output type ID
value combinations. If <code>bind_model_tasks = FALSE</code>, a list containing a
tibble or arrow table for each round modeling task.</p>
<p>Columns are coerced to data types according to the hub schema,
unless <code>all_character = TRUE</code>. If <code>all_character = TRUE</code>, all columns are returned as
character which can be faster when large expanded grids are expected.
If <code>required_vals_only = TRUE</code>, values are limited to the combinations of required
values only.</p>
<p>Note that if <code>required_vals_only = TRUE</code> and an optional output type is
requested through <code>output_types</code>, a zero row grid will be returned.
If all output types are requested however (i.e. when <code>output_types = NULL</code>) and
they are all optional, a grid of required task ID values only will be returned.
However, whenever <code>force_output_types = TRUE</code>, all output types are treated as
required.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>When a round is set to <code>round_id_from_variable: true</code>,
the value of the task ID from which round IDs are derived (i.e. the task ID
specified in <code>round_id</code> property of <code>config_tasks</code>) is set to the value of the
<code>round_id</code> argument in the returned output.</p>
<p>When sample output types are included in the output and <code>include_sample_ids = TRUE</code>,
the <code>output_type_id</code> column contains example sample indexes which are useful
for identifying the compound task ID structure of multivariate sampling
distributions in particular, i.e. which combinations of task ID values
represent individual samples.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">hub_con</span> <span class="op">&lt;-</span> <span class="fu">hubData</span><span class="fu">::</span><span class="fu"><a href="https://hubverse-org.github.io/hubData/reference/connect_hub.html" class="external-link">connect_hub</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"testhubs/flusight"</span>, package <span class="op">=</span> <span class="st">"hubUtils"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">config_tasks</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="va">hub_con</span>, <span class="st">"config_tasks"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">expand_model_out_grid</span><span class="op">(</span><span class="va">config_tasks</span>, round_id <span class="op">=</span> <span class="st">"2023-01-02"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 3,132 × 6</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    forecast_date target              horizon location output_type output_type_id</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                 <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> 2023-01-02    wk flu hosp rate c…       2 US       pmf         large_decrease</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> 2023-01-02    wk flu hosp rate c…       1 US       pmf         large_decrease</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> 2023-01-02    wk flu hosp rate c…       2 01       pmf         large_decrease</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> 2023-01-02    wk flu hosp rate c…       1 01       pmf         large_decrease</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> 2023-01-02    wk flu hosp rate c…       2 02       pmf         large_decrease</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> 2023-01-02    wk flu hosp rate c…       1 02       pmf         large_decrease</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span> 2023-01-02    wk flu hosp rate c…       2 04       pmf         large_decrease</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span> 2023-01-02    wk flu hosp rate c…       1 04       pmf         large_decrease</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> 2023-01-02    wk flu hosp rate c…       2 05       pmf         large_decrease</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> 2023-01-02    wk flu hosp rate c…       1 05       pmf         large_decrease</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 3,122 more rows</span></span>
<span class="r-in"><span><span class="fu">expand_model_out_grid</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">config_tasks</span>,</span></span>
<span class="r-in"><span>  round_id <span class="op">=</span> <span class="st">"2023-01-02"</span>,</span></span>
<span class="r-in"><span>  required_vals_only <span class="op">=</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 28 × 5</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    forecast_date horizon location output_type output_type_id</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> 2023-01-02          2 US       pmf         large_decrease</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> 2023-01-02          2 US       pmf         decrease      </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> 2023-01-02          2 US       pmf         stable        </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> 2023-01-02          2 US       pmf         increase      </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> 2023-01-02          2 US       pmf         large_increase</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> 2023-01-02          2 US       quantile    0.01          </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span> 2023-01-02          2 US       quantile    0.025         </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span> 2023-01-02          2 US       quantile    0.05          </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> 2023-01-02          2 US       quantile    0.1           </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> 2023-01-02          2 US       quantile    0.15          </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 18 more rows</span></span>
<span class="r-in"><span><span class="co"># Specifying a round in a hub with multiple round configurations.</span></span></span>
<span class="r-in"><span><span class="va">hub_con</span> <span class="op">&lt;-</span> <span class="fu">hubData</span><span class="fu">::</span><span class="fu"><a href="https://hubverse-org.github.io/hubData/reference/connect_hub.html" class="external-link">connect_hub</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"testhubs/simple"</span>, package <span class="op">=</span> <span class="st">"hubUtils"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">config_tasks</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="va">hub_con</span>, <span class="st">"config_tasks"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">expand_model_out_grid</span><span class="op">(</span><span class="va">config_tasks</span>, round_id <span class="op">=</span> <span class="st">"2022-10-01"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 5,184 × 6</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    origin_date target          horizon location output_type output_type_id</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> 2022-10-01  wk inc flu hosp       1 US       mean                    <span style="color: #BB0000;">NA</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> 2022-10-01  wk inc flu hosp       2 US       mean                    <span style="color: #BB0000;">NA</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> 2022-10-01  wk inc flu hosp       3 US       mean                    <span style="color: #BB0000;">NA</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> 2022-10-01  wk inc flu hosp       4 US       mean                    <span style="color: #BB0000;">NA</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> 2022-10-01  wk inc flu hosp       1 01       mean                    <span style="color: #BB0000;">NA</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> 2022-10-01  wk inc flu hosp       2 01       mean                    <span style="color: #BB0000;">NA</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span> 2022-10-01  wk inc flu hosp       3 01       mean                    <span style="color: #BB0000;">NA</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span> 2022-10-01  wk inc flu hosp       4 01       mean                    <span style="color: #BB0000;">NA</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> 2022-10-01  wk inc flu hosp       1 02       mean                    <span style="color: #BB0000;">NA</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> 2022-10-01  wk inc flu hosp       2 02       mean                    <span style="color: #BB0000;">NA</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 5,174 more rows</span></span>
<span class="r-in"><span><span class="co"># Later round_id maps to round config that includes additional task ID 'age_group'.</span></span></span>
<span class="r-in"><span><span class="fu">expand_model_out_grid</span><span class="op">(</span><span class="va">config_tasks</span>, round_id <span class="op">=</span> <span class="st">"2022-10-29"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 25,920 × 7</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    origin_date target      horizon location age_group output_type output_type_id</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> 2022-10-29  wk inc flu…       1 US       65+       mean                    <span style="color: #BB0000;">NA</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> 2022-10-29  wk inc flu…       2 US       65+       mean                    <span style="color: #BB0000;">NA</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> 2022-10-29  wk inc flu…       3 US       65+       mean                    <span style="color: #BB0000;">NA</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> 2022-10-29  wk inc flu…       4 US       65+       mean                    <span style="color: #BB0000;">NA</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> 2022-10-29  wk inc flu…       1 01       65+       mean                    <span style="color: #BB0000;">NA</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> 2022-10-29  wk inc flu…       2 01       65+       mean                    <span style="color: #BB0000;">NA</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span> 2022-10-29  wk inc flu…       3 01       65+       mean                    <span style="color: #BB0000;">NA</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span> 2022-10-29  wk inc flu…       4 01       65+       mean                    <span style="color: #BB0000;">NA</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> 2022-10-29  wk inc flu…       1 02       65+       mean                    <span style="color: #BB0000;">NA</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> 2022-10-29  wk inc flu…       2 02       65+       mean                    <span style="color: #BB0000;">NA</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 25,910 more rows</span></span>
<span class="r-in"><span><span class="co"># Coerce all columns to character</span></span></span>
<span class="r-in"><span><span class="fu">expand_model_out_grid</span><span class="op">(</span><span class="va">config_tasks</span>,</span></span>
<span class="r-in"><span>  round_id <span class="op">=</span> <span class="st">"2022-10-29"</span>,</span></span>
<span class="r-in"><span>  all_character <span class="op">=</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 25,920 × 7</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    origin_date target      horizon location age_group output_type output_type_id</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> 2022-10-29  wk inc flu… 1       US       65+       mean        <span style="color: #BB0000;">NA</span>            </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> 2022-10-29  wk inc flu… 2       US       65+       mean        <span style="color: #BB0000;">NA</span>            </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> 2022-10-29  wk inc flu… 3       US       65+       mean        <span style="color: #BB0000;">NA</span>            </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> 2022-10-29  wk inc flu… 4       US       65+       mean        <span style="color: #BB0000;">NA</span>            </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> 2022-10-29  wk inc flu… 1       01       65+       mean        <span style="color: #BB0000;">NA</span>            </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> 2022-10-29  wk inc flu… 2       01       65+       mean        <span style="color: #BB0000;">NA</span>            </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span> 2022-10-29  wk inc flu… 3       01       65+       mean        <span style="color: #BB0000;">NA</span>            </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span> 2022-10-29  wk inc flu… 4       01       65+       mean        <span style="color: #BB0000;">NA</span>            </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> 2022-10-29  wk inc flu… 1       02       65+       mean        <span style="color: #BB0000;">NA</span>            </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> 2022-10-29  wk inc flu… 2       02       65+       mean        <span style="color: #BB0000;">NA</span>            </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 25,910 more rows</span></span>
<span class="r-in"><span><span class="co"># Return arrow table</span></span></span>
<span class="r-in"><span><span class="fu">expand_model_out_grid</span><span class="op">(</span><span class="va">config_tasks</span>,</span></span>
<span class="r-in"><span>  round_id <span class="op">=</span> <span class="st">"2022-10-29"</span>,</span></span>
<span class="r-in"><span>  all_character <span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>  as_arrow_table <span class="op">=</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Table</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 25920 rows x 7 columns</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $origin_date &lt;string&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $target &lt;string&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $horizon &lt;string&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $location &lt;string&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $age_group &lt;string&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $output_type &lt;string&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $output_type_id &lt;string&gt;</span>
<span class="r-in"><span><span class="co"># Hub with sample output type</span></span></span>
<span class="r-in"><span><span class="va">config_tasks</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://hubverse-org.github.io/hubUtils/reference/read_config_file.html" class="external-link">read_config_file</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"config"</span>, <span class="st">"tasks.json"</span>,</span></span>
<span class="r-in"><span>  package <span class="op">=</span> <span class="st">"hubValidations"</span></span></span>
<span class="r-in"><span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">expand_model_out_grid</span><span class="op">(</span><span class="va">config_tasks</span>,</span></span>
<span class="r-in"><span>  round_id <span class="op">=</span> <span class="st">"2022-12-26"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 42 × 6</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    forecast_date target              horizon location output_type output_type_id</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                 <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> 2022-12-26    wk ahead inc flu h…       2 US       sample      <span style="color: #BB0000;">NA</span>            </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> 2022-12-26    wk ahead inc flu h…       1 US       sample      <span style="color: #BB0000;">NA</span>            </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> 2022-12-26    wk ahead inc flu h…       2 01       sample      <span style="color: #BB0000;">NA</span>            </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> 2022-12-26    wk ahead inc flu h…       1 01       sample      <span style="color: #BB0000;">NA</span>            </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> 2022-12-26    wk ahead inc flu h…       2 02       sample      <span style="color: #BB0000;">NA</span>            </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> 2022-12-26    wk ahead inc flu h…       1 02       sample      <span style="color: #BB0000;">NA</span>            </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span> 2022-12-26    wk ahead inc flu h…       2 US       mean        <span style="color: #BB0000;">NA</span>            </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span> 2022-12-26    wk ahead inc flu h…       1 US       mean        <span style="color: #BB0000;">NA</span>            </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> 2022-12-26    wk ahead inc flu h…       2 01       mean        <span style="color: #BB0000;">NA</span>            </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> 2022-12-26    wk ahead inc flu h…       1 01       mean        <span style="color: #BB0000;">NA</span>            </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 32 more rows</span></span>
<span class="r-in"><span><span class="co"># Include sample IDS</span></span></span>
<span class="r-in"><span><span class="fu">expand_model_out_grid</span><span class="op">(</span><span class="va">config_tasks</span>,</span></span>
<span class="r-in"><span>  round_id <span class="op">=</span> <span class="st">"2022-12-26"</span>,</span></span>
<span class="r-in"><span>  include_sample_ids <span class="op">=</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 42 × 6</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    forecast_date target              horizon location output_type output_type_id</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                 <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> 2022-12-26    wk ahead inc flu h…       2 US       mean        <span style="color: #BB0000;">NA</span>            </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> 2022-12-26    wk ahead inc flu h…       1 US       mean        <span style="color: #BB0000;">NA</span>            </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> 2022-12-26    wk ahead inc flu h…       2 01       mean        <span style="color: #BB0000;">NA</span>            </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> 2022-12-26    wk ahead inc flu h…       1 01       mean        <span style="color: #BB0000;">NA</span>            </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> 2022-12-26    wk ahead inc flu h…       2 02       mean        <span style="color: #BB0000;">NA</span>            </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> 2022-12-26    wk ahead inc flu h…       1 02       mean        <span style="color: #BB0000;">NA</span>            </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span> 2022-12-26    wk ahead inc flu h…       2 US       sample      s1            </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span> 2022-12-26    wk ahead inc flu h…       1 US       sample      s2            </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> 2022-12-26    wk ahead inc flu h…       2 01       sample      s3            </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> 2022-12-26    wk ahead inc flu h…       1 01       sample      s4            </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 32 more rows</span></span>
<span class="r-in"><span><span class="co"># Hub with sample output type and compound task ID structure</span></span></span>
<span class="r-in"><span><span class="va">config_tasks</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://hubverse-org.github.io/hubUtils/reference/read_config_file.html" class="external-link">read_config_file</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"config"</span>, <span class="st">"tasks-comp-tid.json"</span>, package <span class="op">=</span> <span class="st">"hubValidations"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">expand_model_out_grid</span><span class="op">(</span><span class="va">config_tasks</span>,</span></span>
<span class="r-in"><span>  round_id <span class="op">=</span> <span class="st">"2022-12-26"</span>,</span></span>
<span class="r-in"><span>  include_sample_ids <span class="op">=</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 42 × 6</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    forecast_date target              horizon location output_type output_type_id</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                 <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> 2022-12-26    wk ahead inc flu h…       2 US       mean        <span style="color: #BB0000;">NA</span>            </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> 2022-12-26    wk ahead inc flu h…       1 US       mean        <span style="color: #BB0000;">NA</span>            </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> 2022-12-26    wk ahead inc flu h…       2 01       mean        <span style="color: #BB0000;">NA</span>            </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> 2022-12-26    wk ahead inc flu h…       1 01       mean        <span style="color: #BB0000;">NA</span>            </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> 2022-12-26    wk ahead inc flu h…       2 02       mean        <span style="color: #BB0000;">NA</span>            </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> 2022-12-26    wk ahead inc flu h…       1 02       mean        <span style="color: #BB0000;">NA</span>            </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span> 2022-12-26    wk ahead inc flu h…       2 US       sample      1             </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span> 2022-12-26    wk ahead inc flu h…       2 01       sample      1             </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> 2022-12-26    wk ahead inc flu h…       2 02       sample      1             </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> 2022-12-26    wk ahead inc flu h…       1 US       sample      2             </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 32 more rows</span></span>
<span class="r-in"><span><span class="co"># Override config compound task ID set</span></span></span>
<span class="r-in"><span><span class="co"># Create coarser compound task ID set for the first modeling task which contains</span></span></span>
<span class="r-in"><span><span class="co"># samples</span></span></span>
<span class="r-in"><span><span class="fu">expand_model_out_grid</span><span class="op">(</span><span class="va">config_tasks</span>,</span></span>
<span class="r-in"><span>  round_id <span class="op">=</span> <span class="st">"2022-12-26"</span>,</span></span>
<span class="r-in"><span>  include_sample_ids <span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>  compound_taskid_set <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"forecast_date"</span>, <span class="st">"target"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    <span class="cn">NULL</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 42 × 6</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    forecast_date target              horizon location output_type output_type_id</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                 <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> 2022-12-26    wk ahead inc flu h…       2 US       mean        <span style="color: #BB0000;">NA</span>            </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> 2022-12-26    wk ahead inc flu h…       1 US       mean        <span style="color: #BB0000;">NA</span>            </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> 2022-12-26    wk ahead inc flu h…       2 01       mean        <span style="color: #BB0000;">NA</span>            </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> 2022-12-26    wk ahead inc flu h…       1 01       mean        <span style="color: #BB0000;">NA</span>            </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> 2022-12-26    wk ahead inc flu h…       2 02       mean        <span style="color: #BB0000;">NA</span>            </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> 2022-12-26    wk ahead inc flu h…       1 02       mean        <span style="color: #BB0000;">NA</span>            </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span> 2022-12-26    wk ahead inc flu h…       2 US       sample      1             </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span> 2022-12-26    wk ahead inc flu h…       1 US       sample      1             </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> 2022-12-26    wk ahead inc flu h…       2 01       sample      1             </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> 2022-12-26    wk ahead inc flu h…       1 01       sample      1             </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 32 more rows</span></span>
<span class="r-in"><span><span class="fu">expand_model_out_grid</span><span class="op">(</span><span class="va">config_tasks</span>,</span></span>
<span class="r-in"><span>  round_id <span class="op">=</span> <span class="st">"2022-12-26"</span>,</span></span>
<span class="r-in"><span>  include_sample_ids <span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>  compound_taskid_set <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="cn">NULL</span>,</span></span>
<span class="r-in"><span>    <span class="cn">NULL</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 42 × 6</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    forecast_date target              horizon location output_type output_type_id</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                 <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> 2022-12-26    wk ahead inc flu h…       2 US       mean        <span style="color: #BB0000;">NA</span>            </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> 2022-12-26    wk ahead inc flu h…       1 US       mean        <span style="color: #BB0000;">NA</span>            </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> 2022-12-26    wk ahead inc flu h…       2 01       mean        <span style="color: #BB0000;">NA</span>            </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> 2022-12-26    wk ahead inc flu h…       1 01       mean        <span style="color: #BB0000;">NA</span>            </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> 2022-12-26    wk ahead inc flu h…       2 02       mean        <span style="color: #BB0000;">NA</span>            </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> 2022-12-26    wk ahead inc flu h…       1 02       mean        <span style="color: #BB0000;">NA</span>            </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span> 2022-12-26    wk ahead inc flu h…       2 US       sample      1             </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span> 2022-12-26    wk ahead inc flu h…       1 US       sample      2             </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> 2022-12-26    wk ahead inc flu h…       2 01       sample      3             </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> 2022-12-26    wk ahead inc flu h…       1 01       sample      4             </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 32 more rows</span></span>
<span class="r-in"><span><span class="co"># Subset output types</span></span></span>
<span class="r-in"><span><span class="va">config_tasks</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://hubverse-org.github.io/hubUtils/reference/read_config.html" class="external-link">read_config</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"testhubs"</span>, <span class="st">"samples"</span>, package <span class="op">=</span> <span class="st">"hubValidations"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">expand_model_out_grid</span><span class="op">(</span><span class="va">config_tasks</span>,</span></span>
<span class="r-in"><span>  round_id <span class="op">=</span> <span class="st">"2022-10-29"</span>,</span></span>
<span class="r-in"><span>  include_sample_ids <span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>  bind_model_tasks <span class="op">=</span> <span class="cn">FALSE</span>,</span></span>
<span class="r-in"><span>  output_types <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"sample"</span>, <span class="st">"pmf"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[1]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 2,560 × 7</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    reference_date target            horizon location target_end_date output_type</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>               <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> 2022-10-29     wk flu hosp rate…       0 US       2022-10-22      pmf        </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> 2022-10-29     wk flu hosp rate…       1 US       2022-10-22      pmf        </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> 2022-10-29     wk flu hosp rate…       2 US       2022-10-22      pmf        </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> 2022-10-29     wk flu hosp rate…       3 US       2022-10-22      pmf        </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> 2022-10-29     wk flu hosp rate…       0 01       2022-10-22      pmf        </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> 2022-10-29     wk flu hosp rate…       1 01       2022-10-22      pmf        </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span> 2022-10-29     wk flu hosp rate…       2 01       2022-10-22      pmf        </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span> 2022-10-29     wk flu hosp rate…       3 01       2022-10-22      pmf        </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> 2022-10-29     wk flu hosp rate…       0 02       2022-10-22      pmf        </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> 2022-10-29     wk flu hosp rate…       1 02       2022-10-22      pmf        </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 2,550 more rows</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 1 more variable: output_type_id &lt;chr&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[2]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 640 × 7</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    reference_date target          horizon location target_end_date output_type</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> 2022-10-29     wk inc flu hosp       0 US       2022-10-22      sample     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> 2022-10-29     wk inc flu hosp       1 US       2022-10-22      sample     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> 2022-10-29     wk inc flu hosp       2 US       2022-10-22      sample     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> 2022-10-29     wk inc flu hosp       3 US       2022-10-22      sample     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> 2022-10-29     wk inc flu hosp       0 US       2022-10-29      sample     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> 2022-10-29     wk inc flu hosp       1 US       2022-10-29      sample     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span> 2022-10-29     wk inc flu hosp       2 US       2022-10-29      sample     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span> 2022-10-29     wk inc flu hosp       3 US       2022-10-29      sample     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> 2022-10-29     wk inc flu hosp       0 US       2022-11-05      sample     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> 2022-10-29     wk inc flu hosp       1 US       2022-11-05      sample     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 630 more rows</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 1 more variable: output_type_id &lt;chr&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span><span class="fu">expand_model_out_grid</span><span class="op">(</span><span class="va">config_tasks</span>,</span></span>
<span class="r-in"><span>  round_id <span class="op">=</span> <span class="st">"2022-10-29"</span>,</span></span>
<span class="r-in"><span>  include_sample_ids <span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>  bind_model_tasks <span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>  output_types <span class="op">=</span> <span class="st">"sample"</span>,</span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 640 × 7</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    reference_date target          horizon location target_end_date output_type</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> 2022-10-29     wk inc flu hosp       0 US       2022-10-22      sample     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> 2022-10-29     wk inc flu hosp       1 US       2022-10-22      sample     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> 2022-10-29     wk inc flu hosp       2 US       2022-10-22      sample     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> 2022-10-29     wk inc flu hosp       3 US       2022-10-22      sample     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> 2022-10-29     wk inc flu hosp       0 US       2022-10-29      sample     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> 2022-10-29     wk inc flu hosp       1 US       2022-10-29      sample     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span> 2022-10-29     wk inc flu hosp       2 US       2022-10-29      sample     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span> 2022-10-29     wk inc flu hosp       3 US       2022-10-29      sample     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> 2022-10-29     wk inc flu hosp       0 US       2022-11-05      sample     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> 2022-10-29     wk inc flu hosp       1 US       2022-11-05      sample     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 630 more rows</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 1 more variable: output_type_id &lt;chr&gt;</span></span>
<span class="r-in"><span><span class="co"># Ignore derived task IDs</span></span></span>
<span class="r-in"><span><span class="fu">expand_model_out_grid</span><span class="op">(</span><span class="va">config_tasks</span>,</span></span>
<span class="r-in"><span>  round_id <span class="op">=</span> <span class="st">"2022-10-29"</span>,</span></span>
<span class="r-in"><span>  include_sample_ids <span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>  bind_model_tasks <span class="op">=</span> <span class="cn">FALSE</span>,</span></span>
<span class="r-in"><span>  output_types <span class="op">=</span> <span class="st">"sample"</span>,</span></span>
<span class="r-in"><span>  derived_task_ids <span class="op">=</span> <span class="st">"target_end_date"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[1]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 0 × 0</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[2]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 20 × 7</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    reference_date target          horizon location target_end_date output_type</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> 2022-10-29     wk inc flu hosp       0 US       <span style="color: #BB0000;">NA</span>              sample     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> 2022-10-29     wk inc flu hosp       1 US       <span style="color: #BB0000;">NA</span>              sample     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> 2022-10-29     wk inc flu hosp       2 US       <span style="color: #BB0000;">NA</span>              sample     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> 2022-10-29     wk inc flu hosp       3 US       <span style="color: #BB0000;">NA</span>              sample     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> 2022-10-29     wk inc flu hosp       0 01       <span style="color: #BB0000;">NA</span>              sample     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> 2022-10-29     wk inc flu hosp       1 01       <span style="color: #BB0000;">NA</span>              sample     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span> 2022-10-29     wk inc flu hosp       2 01       <span style="color: #BB0000;">NA</span>              sample     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span> 2022-10-29     wk inc flu hosp       3 01       <span style="color: #BB0000;">NA</span>              sample     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> 2022-10-29     wk inc flu hosp       0 02       <span style="color: #BB0000;">NA</span>              sample     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> 2022-10-29     wk inc flu hosp       1 02       <span style="color: #BB0000;">NA</span>              sample     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">11</span> 2022-10-29     wk inc flu hosp       2 02       <span style="color: #BB0000;">NA</span>              sample     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">12</span> 2022-10-29     wk inc flu hosp       3 02       <span style="color: #BB0000;">NA</span>              sample     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">13</span> 2022-10-29     wk inc flu hosp       0 04       <span style="color: #BB0000;">NA</span>              sample     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">14</span> 2022-10-29     wk inc flu hosp       1 04       <span style="color: #BB0000;">NA</span>              sample     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">15</span> 2022-10-29     wk inc flu hosp       2 04       <span style="color: #BB0000;">NA</span>              sample     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">16</span> 2022-10-29     wk inc flu hosp       3 04       <span style="color: #BB0000;">NA</span>              sample     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">17</span> 2022-10-29     wk inc flu hosp       0 05       <span style="color: #BB0000;">NA</span>              sample     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">18</span> 2022-10-29     wk inc flu hosp       1 05       <span style="color: #BB0000;">NA</span>              sample     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">19</span> 2022-10-29     wk inc flu hosp       2 05       <span style="color: #BB0000;">NA</span>              sample     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">20</span> 2022-10-29     wk inc flu hosp       3 05       <span style="color: #BB0000;">NA</span>              sample     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 1 more variable: output_type_id &lt;chr&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span><span class="co"># Return only required values</span></span></span>
<span class="r-in"><span><span class="va">hub_path</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"testhubs"</span>, <span class="st">"v4"</span>, <span class="st">"simple"</span>, package <span class="op">=</span> <span class="st">"hubUtils"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">config_tasks</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://hubverse-org.github.io/hubUtils/reference/read_config.html" class="external-link">read_config</a></span><span class="op">(</span><span class="va">hub_path</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># Return required output types and output_types_ids only</span></span></span>
<span class="r-in"><span><span class="fu">expand_model_out_grid</span><span class="op">(</span></span></span>
<span class="r-in"><span>  config_tasks <span class="op">=</span> <span class="va">config_tasks</span>,</span></span>
<span class="r-in"><span>  round_id <span class="op">=</span> <span class="st">"2022-10-22"</span>,</span></span>
<span class="r-in"><span>  required_vals_only <span class="op">=</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 23 × 6</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    origin_date target          horizon age_group output_type output_type_id</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> 2022-10-22  wk inc flu hosp       1 65+       quantile             0.01 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> 2022-10-22  wk inc flu hosp       1 65+       quantile             0.025</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> 2022-10-22  wk inc flu hosp       1 65+       quantile             0.05 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> 2022-10-22  wk inc flu hosp       1 65+       quantile             0.1  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> 2022-10-22  wk inc flu hosp       1 65+       quantile             0.15 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> 2022-10-22  wk inc flu hosp       1 65+       quantile             0.2  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span> 2022-10-22  wk inc flu hosp       1 65+       quantile             0.25 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span> 2022-10-22  wk inc flu hosp       1 65+       quantile             0.3  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> 2022-10-22  wk inc flu hosp       1 65+       quantile             0.35 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> 2022-10-22  wk inc flu hosp       1 65+       quantile             0.4  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 13 more rows</span></span>
<span class="r-in"><span><span class="co"># Force all output types to be required</span></span></span>
<span class="r-in"><span><span class="fu">expand_model_out_grid</span><span class="op">(</span></span></span>
<span class="r-in"><span>  config_tasks <span class="op">=</span> <span class="va">config_tasks</span>,</span></span>
<span class="r-in"><span>  round_id <span class="op">=</span> <span class="st">"2022-10-22"</span>,</span></span>
<span class="r-in"><span>  required_vals_only <span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>  force_output_types <span class="op">=</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 24 × 6</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    origin_date target          horizon age_group output_type output_type_id</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> 2022-10-22  wk inc flu hosp       1 65+       mean                <span style="color: #BB0000;">NA</span>    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> 2022-10-22  wk inc flu hosp       1 65+       quantile             0.01 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> 2022-10-22  wk inc flu hosp       1 65+       quantile             0.025</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> 2022-10-22  wk inc flu hosp       1 65+       quantile             0.05 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> 2022-10-22  wk inc flu hosp       1 65+       quantile             0.1  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> 2022-10-22  wk inc flu hosp       1 65+       quantile             0.15 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span> 2022-10-22  wk inc flu hosp       1 65+       quantile             0.2  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span> 2022-10-22  wk inc flu hosp       1 65+       quantile             0.25 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> 2022-10-22  wk inc flu hosp       1 65+       quantile             0.3  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> 2022-10-22  wk inc flu hosp       1 65+       quantile             0.35 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 14 more rows</span></span>
<span class="r-in"><span><span class="co"># Sub-setting for an optional output type returns an empty data frame</span></span></span>
<span class="r-in"><span><span class="fu">expand_model_out_grid</span><span class="op">(</span></span></span>
<span class="r-in"><span>  config_tasks <span class="op">=</span> <span class="va">config_tasks</span>,</span></span>
<span class="r-in"><span>  round_id <span class="op">=</span> <span class="st">"2022-10-22"</span>,</span></span>
<span class="r-in"><span>  output_types <span class="op">=</span> <span class="st">"mean"</span>,</span></span>
<span class="r-in"><span>  required_vals_only <span class="op">=</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> data frame with 0 columns and 0 rows</span>
<span class="r-in"><span><span class="co"># force_output_types on an optional output type forces all output_type_id values</span></span></span>
<span class="r-in"><span><span class="co"># to be required</span></span></span>
<span class="r-in"><span><span class="fu">expand_model_out_grid</span><span class="op">(</span></span></span>
<span class="r-in"><span>  config_tasks <span class="op">=</span> <span class="va">config_tasks</span>,</span></span>
<span class="r-in"><span>  round_id <span class="op">=</span> <span class="st">"2022-10-22"</span>,</span></span>
<span class="r-in"><span>  output_types <span class="op">=</span> <span class="st">"mean"</span>,</span></span>
<span class="r-in"><span>  required_vals_only <span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>  force_output_types <span class="op">=</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 1 × 6</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   origin_date target          horizon age_group output_type output_type_id</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> 2022-10-22  wk inc flu hosp       1 65+       mean                    <span style="color: #BB0000;">NA</span></span>
<span class="r-in"><span><span class="co"># Ignore derived task IDs</span></span></span>
<span class="r-in"><span><span class="va">hub_path</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"testhubs"</span>, <span class="st">"v4"</span>, <span class="st">"flusight"</span>, package <span class="op">=</span> <span class="st">"hubUtils"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">config_tasks</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://hubverse-org.github.io/hubUtils/reference/read_config.html" class="external-link">read_config</a></span><span class="op">(</span><span class="va">hub_path</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># Defaults to using derived_task_ids from config</span></span></span>
<span class="r-in"><span><span class="fu">expand_model_out_grid</span><span class="op">(</span><span class="va">config_tasks</span>, round_id <span class="op">=</span> <span class="st">"2023-05-08"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 3,132 × 7</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    forecast_date target  horizon target_date location output_type output_type_id</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> 2023-05-08    wk flu…       2 <span style="color: #BB0000;">NA</span>          US       pmf         large_decrease</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> 2023-05-08    wk flu…       1 <span style="color: #BB0000;">NA</span>          US       pmf         large_decrease</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> 2023-05-08    wk flu…       2 <span style="color: #BB0000;">NA</span>          01       pmf         large_decrease</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> 2023-05-08    wk flu…       1 <span style="color: #BB0000;">NA</span>          01       pmf         large_decrease</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> 2023-05-08    wk flu…       2 <span style="color: #BB0000;">NA</span>          02       pmf         large_decrease</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> 2023-05-08    wk flu…       1 <span style="color: #BB0000;">NA</span>          02       pmf         large_decrease</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span> 2023-05-08    wk flu…       2 <span style="color: #BB0000;">NA</span>          04       pmf         large_decrease</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span> 2023-05-08    wk flu…       1 <span style="color: #BB0000;">NA</span>          04       pmf         large_decrease</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> 2023-05-08    wk flu…       2 <span style="color: #BB0000;">NA</span>          05       pmf         large_decrease</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> 2023-05-08    wk flu…       1 <span style="color: #BB0000;">NA</span>          05       pmf         large_decrease</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 3,122 more rows</span></span>
<span class="r-in"><span><span class="co"># Can be overridden by argument derived_task_ids</span></span></span>
<span class="r-in"><span><span class="fu">expand_model_out_grid</span><span class="op">(</span><span class="va">config_tasks</span>,</span></span>
<span class="r-in"><span>  round_id <span class="op">=</span> <span class="st">"2023-05-08"</span>,</span></span>
<span class="r-in"><span>  derived_task_ids <span class="op">=</span> <span class="cn">NULL</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 72,036 × 7</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    forecast_date target  horizon target_date location output_type output_type_id</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> 2023-05-08    wk flu…       2 2022-12-19  US       pmf         large_decrease</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> 2023-05-08    wk flu…       1 2022-12-19  US       pmf         large_decrease</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> 2023-05-08    wk flu…       2 2022-12-26  US       pmf         large_decrease</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> 2023-05-08    wk flu…       1 2022-12-26  US       pmf         large_decrease</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> 2023-05-08    wk flu…       2 2023-01-02  US       pmf         large_decrease</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> 2023-05-08    wk flu…       1 2023-01-02  US       pmf         large_decrease</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span> 2023-05-08    wk flu…       2 2023-01-09  US       pmf         large_decrease</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span> 2023-05-08    wk flu…       1 2023-01-09  US       pmf         large_decrease</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> 2023-05-08    wk flu…       2 2023-01-16  US       pmf         large_decrease</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> 2023-05-08    wk flu…       1 2023-01-16  US       pmf         large_decrease</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 72,026 more rows</span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Anna Krystalli, Evan Ray, Hugo Gruson.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0. PR Previews built by <a href="https://www.netlify.com" class="external-link">Netlify</a>. Provided without <strong>any warranty</strong>.</p>
</div>

    </footer></div>





  </body></html>

